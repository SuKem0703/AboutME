<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Bài 5: Java I/O Streams - Quản lý luồng nhập xuất | BNGroup</title>
<meta name="keywords" content="Java, Input/Output, Stream, Performance">
<meta name="description" content="Tìm hiểu kiến trúc I/O trong Java: Phân biệt Byte Stream và Character Stream, kỹ thuật Buffered để tối ưu hiệu suất và ứng dụng của chúng trong truyền tải dữ liệu mạng.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/coursess/bai-5-java-i-o-streams-quan-ly-luong-nhap-xuat/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fd5566c526ae48aadabd950798a2dc3568536401560eae5caac3765a42a9e7b5.css" integrity="sha256-/VVmxSauSKravZUHmKLcNWhTZAFWDq5cqsN2WkKp57U=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/coursess/bai-5-java-i-o-streams-quan-ly-luong-nhap-xuat/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="BNGroup (Alt + H)">BNGroup</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Trang Chủ">
                    <span>Trang Chủ</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/courses/" title="Khóa Học (LTM)">
                    <span>Khóa Học (LTM)</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="Blog Cá Nhân">
                    <span>Blog Cá Nhân</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="Về Tôi (Profile)">
                    <span>Về Tôi (Profile)</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Bài 5: Java I/O Streams - Quản lý luồng nhập xuất
    </h1>
    <div class="post-meta"><span title='2025-12-21 00:00:00 +0000 UTC'>December 21, 2025</span>&nbsp;·&nbsp;<span>5 phút</span>

</div>
  </header> 
  <div class="post-content"><p>Trong lập trình mạng, bản chất của việc giao tiếp giữa Client và Server chính là quá trình Nhập (Input) và Xuất (Output) dữ liệu. Dù dữ liệu đó là một tin nhắn văn bản, một bức ảnh hay một video, chúng đều phải được chuyển thành dòng dữ liệu (Stream) để di chuyển qua dây dẫn mạng.</p>
<p>Java cung cấp gói thư viện <code>java.io</code> rất mạnh mẽ để xử lý vấn đề này. Nếu bạn đến từ C#, bạn sẽ thấy sự tương đồng giữa <code>System.IO</code> của .NET và <code>java.io</code> của Java.</p>
<h2 id="1-khái-niệm-về-stream-luồng">1. Khái niệm về Stream (Luồng)<a hidden class="anchor" aria-hidden="true" href="#1-khái-niệm-về-stream-luồng">#</a></h2>
<p>Stream là một khái niệm trừu tượng biểu diễn một dòng dữ liệu chảy từ nguồn (Source) đến đích (Destination).</p>
<ul>
<li><strong>InputStream (Luồng nhập):</strong> Dùng để đọc dữ liệu từ nguồn (bàn phím, file, mạng) vào chương trình.</li>
<li><strong>OutputStream (Luồng xuất):</strong> Dùng để ghi dữ liệu từ chương trình ra đích (màn hình, file, mạng).</li>
</ul>
<p>Nguyên tắc vàng: Stream trong Java hoạt động theo cơ chế tuần tự (FIFO - First In First Out). Bạn đọc byte số 1, sau đó mới đến byte số 2, không thể nhảy cóc ngẫu nhiên (trừ khi dùng <code>RandomAccessFile</code>).</p>
<h2 id="2-phân-loại-stream-byte-vs-character">2. Phân loại Stream: Byte vs Character<a hidden class="anchor" aria-hidden="true" href="#2-phân-loại-stream-byte-vs-character">#</a></h2>
<p>Đây là sự phân biệt quan trọng nhất mà mọi lập trình viên Java cần nắm vững để tránh lỗi hiển thị ký tự (font lỗi).</p>
<h3 id="21-byte-stream-luồng-byte">2.1. Byte Stream (Luồng Byte)<a hidden class="anchor" aria-hidden="true" href="#21-byte-stream-luồng-byte">#</a></h3>
<p>Byte Stream làm việc với dữ liệu thô dạng nhị phân, xử lý từng byte (8-bit) một.</p>
<ul>
<li><strong>Lớp cha:</strong> <code>InputStream</code> và <code>OutputStream</code>.</li>
<li><strong>Các lớp cài đặt phổ biến:</strong> <code>FileInputStream</code>, <code>FileOutputStream</code>, <code>BufferedInputStream</code>.</li>
<li><strong>Ứng dụng:</strong> Dùng để xử lý các dữ liệu không phải văn bản như: Hình ảnh (PNG, JPG), Video (MP4), File âm thanh, hoặc File thực thi (.exe).</li>
</ul>
<p>Nếu bạn dùng Byte Stream để đọc file văn bản tiếng Việt có dấu, khả năng cao sẽ bị lỗi font vì một ký tự UTF-8 có thể tốn 2-3 byte, việc đọc từng byte rời rạc sẽ làm gãy mã ký tự.</p>
<h3 id="22-character-stream-luồng-ký-tự">2.2. Character Stream (Luồng Ký tự)<a hidden class="anchor" aria-hidden="true" href="#22-character-stream-luồng-ký-tự">#</a></h3>
<p>Character Stream được thiết kế để xử lý văn bản, tự động chuyển đổi các byte thành ký tự (16-bit Unicode) dựa trên bảng mã (encoding) của hệ thống.</p>
<ul>
<li><strong>Lớp cha:</strong> <code>Reader</code> và <code>Writer</code>.</li>
<li><strong>Các lớp cài đặt phổ biến:</strong> <code>FileReader</code>, <code>FileWriter</code>, <code>BufferedReader</code>, <code>PrintWriter</code>.</li>
<li><strong>Ứng dụng:</strong> Chuyên dùng để đọc/ghi file text, log file, hoặc tin nhắn chat.</li>
</ul>
<h3 id="23-bảng-so-sánh">2.3. Bảng so sánh<a hidden class="anchor" aria-hidden="true" href="#23-bảng-so-sánh">#</a></h3>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Đặc điểm</th>
          <th style="text-align: left">Byte Stream</th>
          <th style="text-align: left">Character Stream</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><strong>Đơn vị xử lý</strong></td>
          <td style="text-align: left">1 byte (8-bit)</td>
          <td style="text-align: left">1 char (16-bit Unicode)</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>Lớp gốc</strong></td>
          <td style="text-align: left">InputStream / OutputStream</td>
          <td style="text-align: left">Reader / Writer</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>Dữ liệu phù hợp</strong></td>
          <td style="text-align: left">Binary (Ảnh, Nhạc, Video)</td>
          <td style="text-align: left">Text (Văn bản, JSON, XML)</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>Ví dụ</strong></td>
          <td style="text-align: left">FileInputStream</td>
          <td style="text-align: left">FileReader</td>
      </tr>
  </tbody>
</table>
<h2 id="3-kỹ-thuật-buffered-bộ-đệm">3. Kỹ thuật Buffered (Bộ đệm)<a hidden class="anchor" aria-hidden="true" href="#3-kỹ-thuật-buffered-bộ-đệm">#</a></h2>
<p>Trong thực tế, việc đọc/ghi từng byte trực tiếp vào ổ cứng hoặc card mạng là cực kỳ tốn kém về hiệu năng (do chi phí gọi hệ thống - system calls).</p>
<p>Để giải quyết, Java cung cấp các lớp Wrapper có chức năng đệm: <code>BufferedInputStream</code>, <code>BufferedOutputStream</code>, <code>BufferedReader</code>, <code>BufferedWriter</code>.</p>
<p><strong>Cơ chế hoạt động:</strong>
Thay vì ghi từng byte ngay lập tức, Buffered Stream sẽ gom dữ liệu vào một mảng bộ nhớ đệm (buffer array, mặc định thường là 8KB). Khi bộ đệm đầy (hoặc khi gọi lệnh <code>flush()</code>), nó mới thực hiện ghi một lần xuống thiết bị vật lý. Điều này giúp giảm số lần truy xuất I/O, tăng tốc độ chương trình lên hàng trăm lần.</p>
<h2 id="4-cầu-nối-inputstreamreader-và-outputstreamwriter">4. Cầu nối: InputStreamReader và OutputStreamWriter<a hidden class="anchor" aria-hidden="true" href="#4-cầu-nối-inputstreamreader-và-outputstreamwriter">#</a></h2>
<p>Trong lập trình Socket (mà chúng ta sẽ học ở Bài 6), luồng dữ liệu nhận được từ mạng luôn là <strong>Byte Stream</strong> (<code>socket.getInputStream()</code>). Để xử lý tin nhắn chat (văn bản), chúng ta cần chuyển đổi nó sang <strong>Character Stream</strong>.</p>
<p>Lớp <code>InputStreamReader</code> đóng vai trò là cầu nối: Nó đọc các byte và giải mã chúng thành ký tự.</p>
<p><strong>Mô hình wrapper thường thấy trong lập trình mạng:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// 1. Lấy luồng byte từ Socket</span>
</span></span><span style="display:flex;"><span>InputStream is <span style="color:#f92672">=</span> socket.<span style="color:#a6e22e">getInputStream</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 2. Chuyển đổi sang luồng ký tự (Bridge)</span>
</span></span><span style="display:flex;"><span>InputStreamReader isr <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> InputStreamReader(is, StandardCharsets.<span style="color:#a6e22e">UTF_8</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 3. Đưa vào bộ đệm để đọc từng dòng (Performance)</span>
</span></span><span style="display:flex;"><span>BufferedReader reader <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader(isr);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 4. Đọc dữ liệu</span>
</span></span><span style="display:flex;"><span>String message <span style="color:#f92672">=</span> reader.<span style="color:#a6e22e">readLine</span>();
</span></span></code></pre></div><h2 id="5-ví-dụ-thực-hành">5. Ví dụ thực hành<a hidden class="anchor" aria-hidden="true" href="#5-ví-dụ-thực-hành">#</a></h2>
<h3 id="51-copy-file-dùng-byte-stream-buffered">5.1. Copy file dùng Byte Stream (Buffered)<a hidden class="anchor" aria-hidden="true" href="#51-copy-file-dùng-byte-stream-buffered">#</a></h3>
<p>Đoạn code này có thể copy bất kỳ loại file nào (ảnh, nhạc, text).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">FileCopyDemo</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Sử dụng try-with-resources để tự động đóng stream (Java 7+)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> (
</span></span><span style="display:flex;"><span>            BufferedInputStream bis <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedInputStream(<span style="color:#66d9ef">new</span> FileInputStream(<span style="color:#e6db74">&#34;source.jpg&#34;</span>));
</span></span><span style="display:flex;"><span>            BufferedOutputStream bos <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedOutputStream(<span style="color:#66d9ef">new</span> FileOutputStream(<span style="color:#e6db74">&#34;dest.jpg&#34;</span>))
</span></span><span style="display:flex;"><span>        ) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> buffer <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">byte</span><span style="color:#f92672">[</span>1024<span style="color:#f92672">]</span>; <span style="color:#75715e">// Đọc mỗi lần 1KB</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">int</span> bytesRead;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> ((bytesRead <span style="color:#f92672">=</span> bis.<span style="color:#a6e22e">read</span>(buffer)) <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span>1) {
</span></span><span style="display:flex;"><span>                bos.<span style="color:#a6e22e">write</span>(buffer, 0, bytesRead);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Copy file thành công!&#34;</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="52-đọc-ghi-văn-bản-dùng-character-stream">5.2. Đọc ghi văn bản dùng Character Stream<a hidden class="anchor" aria-hidden="true" href="#52-đọc-ghi-văn-bản-dùng-character-stream">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TextReadWriteDemo</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> (
</span></span><span style="display:flex;"><span>            BufferedReader reader <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader(<span style="color:#66d9ef">new</span> FileReader(<span style="color:#e6db74">&#34;input.txt&#34;</span>));
</span></span><span style="display:flex;"><span>            BufferedWriter writer <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedWriter(<span style="color:#66d9ef">new</span> FileWriter(<span style="color:#e6db74">&#34;output.txt&#34;</span>))
</span></span><span style="display:flex;"><span>        ) {
</span></span><span style="display:flex;"><span>            String line;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Đọc từng dòng cho đến hết file</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> ((line <span style="color:#f92672">=</span> reader.<span style="color:#a6e22e">readLine</span>()) <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Đọc được: &#34;</span> <span style="color:#f92672">+</span> line);
</span></span><span style="display:flex;"><span>                writer.<span style="color:#a6e22e">write</span>(<span style="color:#e6db74">&#34;Copy: &#34;</span> <span style="color:#f92672">+</span> line);
</span></span><span style="display:flex;"><span>                writer.<span style="color:#a6e22e">newLine</span>(); <span style="color:#75715e">// Xuống dòng</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="6-kết-luận-và-liên-hệ-lập-trình-mạng">6. Kết luận và Liên hệ Lập trình mạng<a hidden class="anchor" aria-hidden="true" href="#6-kết-luận-và-liên-hệ-lập-trình-mạng">#</a></h2>
<p>Kiến thức về I/O Stream là nền móng bắt buộc. Khi làm việc với mạng (Network Programming):</p>
<ol>
<li><strong>Socket</strong> chỉ cung cấp hai luồng cơ bản: <code>InputStream</code> và <code>OutputStream</code>.</li>
<li>Bạn phải tự quyết định bọc (wrap) chúng thành <code>DataInputStream</code> (nếu gửi dữ liệu nguyên thủy như int, float), <code>ObjectInputStream</code> (nếu gửi đối tượng Java) hay <code>BufferedReader</code> (nếu gửi văn bản chat).</li>
<li>Luôn nhớ <strong>flush()</strong> dữ liệu khi gửi qua mạng để đảm bảo gói tin được đẩy đi ngay lập tức.</li>
</ol>
<p>Trong bài tiếp theo, chúng ta sẽ áp dụng trực tiếp các kiến thức này để xây dựng một chương trình Chat Client-Server bằng giao thức TCP.</p>
<hr>
<h2 id="tài-liệu-tham-khảo">Tài liệu tham khảo<a hidden class="anchor" aria-hidden="true" href="#tài-liệu-tham-khảo">#</a></h2>
<ol>
<li>Oracle Java Documentation. &ldquo;Basic I/O&rdquo;.</li>
<li>GeeksforGeeks. &ldquo;Difference between Byte Stream and Character Stream Class in Java&rdquo;.</li>
<li>Baeldung. &ldquo;Java InputStreamReader and OutputStreamWriter&rdquo;.</li>
<li>Giáo trình Lập trình mạng - Hutech.</li>
</ol>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/java/">Java</a></li>
      <li><a href="http://localhost:1313/tags/input/output/">Input/Output</a></li>
      <li><a href="http://localhost:1313/tags/stream/">Stream</a></li>
      <li><a href="http://localhost:1313/tags/performance/">Performance</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>
        © 2025 BNGroup - All Rights Reserved
    </span>
</footer></body>

</html>
