<!DOCTYPE html>
<html lang="vi" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Tìm hiểu cấu trúc JSON, cơ chế Serialization và cách sử dụng Fetch API để thực hiện các yêu cầu HTTP (GET, POST) trong mô hình Client-Server.">
<title>Bài 4: JSON và Fetch API - Giao tiếp Client-Server</title>

<link rel='canonical' href='http://localhost:1313/courses/bai-4-json-va-fetch-api-giao-tiep-client-server/'>

<link rel="stylesheet" href="/scss/style.min.efb84b7384d449b8bb667de8fcc2113386cb527d95f5315ce406021beb8040f3.css"><meta property='og:title' content="Bài 4: JSON và Fetch API - Giao tiếp Client-Server">
<meta property='og:description' content="Tìm hiểu cấu trúc JSON, cơ chế Serialization và cách sử dụng Fetch API để thực hiện các yêu cầu HTTP (GET, POST) trong mô hình Client-Server.">
<meta property='og:url' content='http://localhost:1313/courses/bai-4-json-va-fetch-api-giao-tiep-client-server/'>
<meta property='og:site_name' content='BNGroup'>
<meta property='og:type' content='article'><meta property='article:section' content='Courses' /><meta property='article:tag' content='JSON' /><meta property='article:tag' content='Fetch API' /><meta property='article:tag' content='HTTP' /><meta property='article:tag' content='RESTful' /><meta property='article:published_time' content='2025-12-21T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2025-12-21T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="Bài 4: JSON và Fetch API - Giao tiếp Client-Server">
<meta name="twitter:description" content="Tìm hiểu cấu trúc JSON, cơ chế Serialization và cách sử dụng Fetch API để thực hiện các yêu cầu HTTP (GET, POST) trong mô hình Client-Server.">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Hiển thị Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    <img src="/portrait/BuiBinhNguyen.png" width="300" height="300" class="site-logo" loading="lazy" alt="Avatar">
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">BNGroup</a></h1>
            <h2 class="site-description">Code • Guitar • Game • Business</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://www.youtube.com/@Sheeppp'
                        target="_blank"
                        title="YouTube"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://www.facebook.com/binh.nguyen.250862'
                        target="_blank"
                        title="Facebook"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/SuKem0703/'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                <span>Trang Chủ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/projects/chronicles-of-knight-and-mage/' >
                
                
                
                <span>Dự Án</span>
            </a>
        </li>
        
        
        <li >
            <a href='/courses/' >
                
                
                
                <span>Khóa Học (LTM)</span>
            </a>
        </li>
        
        
        <li >
            <a href='/posts/' >
                
                
                
                <span>Blog</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                <span>Về Tôi</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Chế độ nền tối</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Mục lục</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#1-json-javascript-object-notation">1. JSON (JavaScript Object Notation)</a>
      <ul>
        <li><a href="#11-json-là-gì">1.1. JSON là gì?</a></li>
        <li><a href="#12-cấu-trúc-và-quy-tắc-cú-pháp">1.2. Cấu trúc và Quy tắc cú pháp</a></li>
        <li><a href="#13-serialization-và-deserialization">1.3. Serialization và Deserialization</a></li>
      </ul>
    </li>
    <li><a href="#2-giao-thức-http-cơ-bản">2. Giao thức HTTP cơ bản</a></li>
    <li><a href="#3-fetch-api">3. Fetch API</a>
      <ul>
        <li><a href="#31-cú-pháp-cơ-bản">3.1. Cú pháp cơ bản</a></li>
        <li><a href="#32-quy-trình-xử-lý-response-2-giai-đoạn">3.2. Quy trình xử lý Response 2 giai đoạn</a></li>
      </ul>
    </li>
    <li><a href="#4-thực-hành-client-server-simulation">4. Thực hành: Client-Server Simulation</a>
      <ul>
        <li><a href="#41-kịch-bản-1-lấy-danh-sách-get-request">4.1. Kịch bản 1: Lấy danh sách (GET Request)</a></li>
        <li><a href="#42-kịch-bản-2-gửi-dữ-liệu-mới-post-request">4.2. Kịch bản 2: Gửi dữ liệu mới (POST Request)</a></li>
      </ul>
    </li>
    <li><a href="#5-các-vấn-đề-thường-gặp-trong-lập-trình-mạng">5. Các vấn đề thường gặp trong Lập trình mạng</a>
      <ul>
        <li><a href="#51-cors-cross-origin-resource-sharing">5.1. CORS (Cross-Origin Resource Sharing)</a></li>
        <li><a href="#52-quên-serialize-body">5.2. Quên Serialize Body</a></li>
        <li><a href="#53-không-kiểm-tra-responseok">5.3. Không kiểm tra <code>response.ok</code></a></li>
      </ul>
    </li>
    <li><a href="#6-kết-luận">6. Kết luận</a></li>
    <li><a href="#tài-liệu-tham-khảo">Tài liệu tham khảo</a></li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/courses/bai-4-json-va-fetch-api-giao-tiep-client-server/">Bài 4: JSON và Fetch API - Giao tiếp Client-Server</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published" datetime='2025-12-21T00:00:00Z'>21/12/2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    6 phút đọc
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>Trong các bài trước, chúng ta đã học cách xử lý logic bất đồng bộ. Tuy nhiên, một ứng dụng mạng thực thụ cần phải giao tiếp với thế giới bên ngoài: gửi dữ liệu lên Server và nhận kết quả trả về. Để làm được điều này, Client và Server cần thống nhất hai việc:</p>
<ol>
<li><strong>Định dạng dữ liệu:</strong> Chúng ta nói chuyện bằng ngôn ngữ gì? (JSON).</li>
<li><strong>Giao thức vận chuyển:</strong> Chúng ta gửi dữ liệu đi như thế nào? (HTTP/Fetch API).</li>
</ol>
<p>Bài viết này sẽ giải quyết tường tận hai vấn đề trên.</p>
<h2 id="1-json-javascript-object-notation">1. JSON (JavaScript Object Notation)
</h2><h3 id="11-json-là-gì">1.1. JSON là gì?
</h3><p>JSON là một định dạng hoán đổi dữ liệu văn bản nhẹ (lightweight text-based data interchange format). Mặc dù tên gọi có chữ &ldquo;JavaScript&rdquo;, JSON hiện nay độc lập với ngôn ngữ và được hỗ trợ bởi hầu hết các ngôn ngữ lập trình (C#, Java, Python, Go&hellip;).</p>
<p>Trong lập trình mạng, JSON đóng vai trò là &ldquo;payload&rdquo; (hàng hóa) được đóng gói trong các gói tin HTTP để truyền qua lại giữa Client và Server.</p>
<h3 id="12-cấu-trúc-và-quy-tắc-cú-pháp">1.2. Cấu trúc và Quy tắc cú pháp
</h3><p>JSON được xây dựng dựa trên hai cấu trúc:</p>
<ul>
<li>Một tập hợp các cặp key/value (tương đương Object trong JS).</li>
<li>Một danh sách các giá trị có thứ tự (tương đương Array trong JS).</li>
</ul>
<p><strong>Quy tắc nghiêm ngặt của JSON:</strong></p>
<ol>
<li>Dữ liệu nằm trong các cặp name/value.</li>
<li>Key (tên trường) <strong>bắt buộc</strong> phải đặt trong dấu nháy kép <code>&quot;&quot;</code>. (Đây là điểm khác biệt lớn nhất so với JS Object).</li>
<li>Chuỗi (String) phải dùng nháy kép <code>&quot;&quot;</code>. Không được dùng nháy đơn <code>''</code>.</li>
<li>Không được phép có dấu phẩy <code>,</code> ở phần tử cuối cùng (trailing comma).</li>
</ol>
<p>Ví dụ một đoạn JSON hợp lệ:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">101</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;nguyenvana&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;isActive&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;roles&#34;</span>: [<span style="color:#e6db74">&#34;admin&#34;</span>, <span style="color:#e6db74">&#34;editor&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;metadata&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;lastLogin&#34;</span>: <span style="color:#e6db74">&#34;2025-12-28T10:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="13-serialization-và-deserialization">1.3. Serialization và Deserialization
</h3><p>Khi truyền dữ liệu qua mạng (Socket hoặc HTTP), chúng ta chỉ có thể truyền chuỗi văn bản (String) hoặc byte. Chúng ta không thể truyền nguyên cả một Object đang nằm trong bộ nhớ RAM. Do đó, cần có quy trình chuyển đổi:</p>
<ol>
<li><strong>Serialization (Tuần tự hóa):</strong> Chuyển Object JavaScript thành chuỗi JSON để gửi đi.
<ul>
<li>Phương thức: <code>JSON.stringify(object)</code></li>
</ul>
</li>
<li><strong>Deserialization (Giải tuần tự hóa):</strong> Nhận chuỗi JSON từ mạng và chuyển lại thành Object JavaScript để xử lý.
<ul>
<li>Phương thức: <code>JSON.parse(string)</code></li>
</ul>
</li>
</ol>
<p>Ví dụ:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;An&#34;</span> };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 1. Client gửi đi (Serialize)
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">dataToSend</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">user</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">dataToSend</span>); <span style="color:#75715e">// &#34;string&#34; -&gt; &#39;{&#34;id&#34;:1,&#34;name&#34;:&#34;An&#34;}&#39;
</span></span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 2. Server gửi về (Deserialize)
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">jsonString</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;{&#34;id&#34;:2, &#34;name&#34;:&#34;Binh&#34;}&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">receivedUser</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">jsonString</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">receivedUser</span>.<span style="color:#a6e22e">name</span>); <span style="color:#75715e">// &#34;Binh&#34;
</span></span></span></code></pre></div><h2 id="2-giao-thức-http-cơ-bản">2. Giao thức HTTP cơ bản
</h2><p>Trước khi dùng Fetch API, cần hiểu Client và Server giao tiếp qua HTTP (Hypertext Transfer Protocol) như thế nào.</p>
<p>Một HTTP Request bao gồm:</p>
<ul>
<li><strong>URL:</strong> Địa chỉ tài nguyên (VD: <code>https://api.example.com/users</code>).</li>
<li><strong>Method (Phương thức):</strong> Hành động muốn thực hiện.
<ul>
<li><code>GET</code>: Lấy dữ liệu.</li>
<li><code>POST</code>: Tạo mới dữ liệu.</li>
<li><code>PUT</code>: Cập nhật toàn bộ dữ liệu.</li>
<li><code>PATCH</code>: Cập nhật một phần dữ liệu.</li>
<li><code>DELETE</code>: Xóa dữ liệu.</li>
</ul>
</li>
<li><strong>Headers:</strong> Thông tin bổ sung (VD: <code>Content-Type: application/json</code>, <code>Authorization: Bearer token...</code>).</li>
<li><strong>Body:</strong> Dữ liệu gửi đi (thường là chuỗi JSON), chỉ có trong POST/PUT/PATCH.</li>
</ul>
<h2 id="3-fetch-api">3. Fetch API
</h2><p>Fetch API là chuẩn mới thay thế cho <code>XMLHttpRequest</code> cũ kỹ, cung cấp giao diện lập trình mạnh mẽ và linh hoạt hơn để thao tác với HTTP Pipeline. Fetch sử dụng <strong>Promise</strong> (và tương thích hoàn toàn với Async/Await).</p>
<h3 id="31-cú-pháp-cơ-bản">3.1. Cú pháp cơ bản
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">options</span>)
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">response</span> =&gt; <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>())
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">data</span> =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">data</span>))
</span></span><span style="display:flex;"><span>  .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#a6e22e">error</span>));
</span></span></code></pre></div><h3 id="32-quy-trình-xử-lý-response-2-giai-đoạn">3.2. Quy trình xử lý Response 2 giai đoạn
</h3><p>Một điểm cần lưu ý đặc biệt khi dùng Fetch là nó trả về Promise qua 2 bước:</p>
<ol>
<li><strong>Bước 1:</strong> Nhận Headers và trạng thái kết nối (Response Object). Lúc này body chưa được tải về hoàn toàn.</li>
<li><strong>Bước 2:</strong> Đọc luồng dữ liệu (Stream) từ body và parse nó (thường dùng <code>.json()</code> hoặc <code>.text()</code>).</li>
</ol>
<p>Đó là lý do tại sao chúng ta thường thấy 2 lần <code>await</code>.</p>
<h2 id="4-thực-hành-client-server-simulation">4. Thực hành: Client-Server Simulation
</h2><p>Chúng ta sẽ sử dụng <code>JSONPlaceholder</code> - một dịch vụ REST API miễn phí để thực hành giả lập.</p>
<h3 id="41-kịch-bản-1-lấy-danh-sách-get-request">4.1. Kịch bản 1: Lấy danh sách (GET Request)
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">API_URL</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;[https://jsonplaceholder.typicode.com/posts](https://jsonplaceholder.typicode.com/posts)&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getPosts</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Mặc định fetch dùng method GET
</span></span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">API_URL</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Kiểm tra mã trạng thái HTTP (200-299 là thành công)
</span></span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`HTTP error! Status: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">status</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Chuyển đổi stream body sang JSON
</span></span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">posts</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`Đã tải </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">posts</span>.<span style="color:#a6e22e">length</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> bài viết.`</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Bài đầu tiên:&#34;</span>, <span style="color:#a6e22e">posts</span>[<span style="color:#ae81ff">0</span>].<span style="color:#a6e22e">title</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#34;Lỗi tải dữ liệu:&#34;</span>, <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">getPosts</span>();
</span></span></code></pre></div><h3 id="42-kịch-bản-2-gửi-dữ-liệu-mới-post-request">4.2. Kịch bản 2: Gửi dữ liệu mới (POST Request)
</h3><p>Khi gửi dữ liệu (POST), chúng ta cần cấu hình tham số <code>options</code> kỹ hơn: khai báo method, headers và body.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">createPost</span>(<span style="color:#a6e22e">title</span>, <span style="color:#a6e22e">body</span>, <span style="color:#a6e22e">userId</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">newPost</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">title</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">body</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">userId</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">userId</span>
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;[https://jsonplaceholder.typicode.com/posts](https://jsonplaceholder.typicode.com/posts)&#39;</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;POST&#39;</span>, <span style="color:#75715e">// Chỉ định phương thức
</span></span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Báo cho Server biết ta đang gửi JSON
</span></span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;Content-Type&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;application/json; charset=UTF-8&#39;</span>,
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Quan trọng: Phải chuyển Object sang chuỗi JSON
</span></span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">newPost</span>),
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;Gửi dữ liệu thất bại&#39;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Đăng bài thành công! ID mới:&#34;</span>, <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">id</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#34;Lỗi:&#34;</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">createPost</span>(<span style="color:#e6db74">&#34;Học Lập trình mạng&#34;</span>, <span style="color:#e6db74">&#34;Fetch API rất thú vị&#34;</span>, <span style="color:#ae81ff">1</span>);
</span></span></code></pre></div><h2 id="5-các-vấn-đề-thường-gặp-trong-lập-trình-mạng">5. Các vấn đề thường gặp trong Lập trình mạng
</h2><h3 id="51-cors-cross-origin-resource-sharing">5.1. CORS (Cross-Origin Resource Sharing)
</h3><p>Đây là lỗi kinh điển nhất. Trình duyệt có cơ chế bảo mật chặn các request từ domain này (ví dụ <code>localhost:3000</code>) sang domain khác (ví dụ <code>api.server.com</code>) nếu Server không cho phép.</p>
<ul>
<li><strong>Dấu hiệu:</strong> Console báo lỗi đỏ lòm có chữ &ldquo;Access-Control-Allow-Origin&rdquo;.</li>
<li><strong>Cách sửa:</strong> Cấu hình tại Server (Backend) để cho phép Origin của Client.</li>
</ul>
<h3 id="52-quên-serialize-body">5.2. Quên Serialize Body
</h3><p>Nếu bạn gửi trực tiếp Object (<code>body: newPost</code>) thay vì <code>JSON.stringify(newPost)</code>, Server sẽ nhận được dữ liệu rác <code>[object Object]</code> và không xử lý được.</p>
<h3 id="53-không-kiểm-tra-responseok">5.3. Không kiểm tra <code>response.ok</code>
</h3><p>Fetch API chỉ reject Promise khi mất mạng (network failure). Nếu Server trả về lỗi 404 hay 500, Fetch vẫn coi là &ldquo;thành công&rdquo; (fulfilled). Do đó, lập trình viên phải thủ công kiểm tra <code>if (!response.ok)</code>.</p>
<h2 id="6-kết-luận">6. Kết luận
</h2><p>Hiểu về JSON và Fetch API là bạn đã nắm được cách Client &ldquo;trò chuyện&rdquo; với Server.</p>
<ul>
<li><strong>JSON</strong> là định dạng tin nhắn.</li>
<li><strong>Fetch API</strong> là người đưa thư.</li>
</ul>
<p>Kiến thức này sẽ được áp dụng trực tiếp khi chúng ta xây dựng ứng dụng Chat Client-Server bằng Java Socket ở các bài sau, nơi bạn sẽ phải tự tay đóng gói chuỗi JSON và gửi qua luồng TCP.</p>
<hr>
<h2 id="tài-liệu-tham-khảo">Tài liệu tham khảo
</h2><ol>
<li>MDN Web Docs. &ldquo;Fetch API - Web APIs&rdquo;.</li>
<li>MDN Web Docs. &ldquo;Working with JSON&rdquo;.</li>
<li>JSON.org. &ldquo;Introducing JSON&rdquo;.</li>
<li>W3Schools. &ldquo;JSON Data Types&rdquo;.</li>
</ol>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/json/">JSON</a>
        
            <a href="/tags/fetch-api/">Fetch API</a>
        
            <a href="/tags/http/">HTTP</a>
        
            <a href="/tags/restful/">RESTful</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy;
        
        2025 BNGroup - All Rights Reserved
    </section>
</footer>

    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >
    

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.4e8a86d0f8f35ef18c4e852e474f63e7209fb5153656db9656d04182f27f7f64.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
